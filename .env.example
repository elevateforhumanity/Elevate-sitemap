# ============================================================================
# ELEVATE FOR HUMANITY - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# ============================================================================

# ----------------------------------------------------------------------------
# APPLICATION
# ----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000
FRONTEND_URL=https://elevateforhumanity.org # Durable hosting
API_URL=https://api.elevateforhumanity.org # Railway backend

# ----------------------------------------------------------------------------
# DATABASE (Supabase PostgreSQL)
# ----------------------------------------------------------------------------
# Get from: https://app.supabase.com/project/_/settings/database
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres
# Direct connection (for migrations)
DATABASE_DIRECT_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres

# ----------------------------------------------------------------------------
# SUPABASE
# ----------------------------------------------------------------------------
# Get from: https://app.supabase.com/project/_/settings/api
SUPABASE_URL=https://[YOUR-PROJECT-REF].supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Frontend (Vite)
VITE_SUPABASE_URL=https://[YOUR-PROJECT-REF].supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ----------------------------------------------------------------------------
# REDIS (Railway or Upstash)
# ----------------------------------------------------------------------------
# Get from Railway Redis service or Upstash
REDIS_URL=redis://default:[PASSWORD]@[HOST]:6379
REDIS_HOST=redis-12345.railway.app
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password

# ----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# ----------------------------------------------------------------------------
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_ME_TO_RANDOM_64_BYTE_HEX_STRING
JWT_EXPIRES_IN=7d

# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=CHANGE_ME_TO_RANDOM_32_BYTE_HEX_STRING
SESSION_SECRET=CHANGE_ME_TO_RANDOM_32_BYTE_HEX_STRING

# Admin access
ADMIN_SECRET=CHANGE_ME_TO_RANDOM_ADMIN_SECRET

# ----------------------------------------------------------------------------
# STRIPE PAYMENTS
# ----------------------------------------------------------------------------
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_... # Use sk_live_... in production
STRIPE_PUBLIC_KEY=pk_test_... # Use pk_live_... in production
STRIPE_WEBHOOK_SECRET=whsec_... # Get from webhook settings

# Frontend
VITE_STRIPE_PUBLIC_KEY=pk_test_...

# ----------------------------------------------------------------------------
# DURABLE (Frontend Hosting)
# ----------------------------------------------------------------------------
# Get from: https://durable.co/dashboard
DURABLE_SITE_ID=your-site-id
DURABLE_API_KEY=your-api-key
DURABLE_DOMAIN=elevateforhumanity.org

# ----------------------------------------------------------------------------
# CLOUDFLARE (CDN, WAF, Workers)
# ----------------------------------------------------------------------------
# Get from: https://dash.cloudflare.com/profile/api-tokens
CLOUDFLARE_API_TOKEN=your-api-token
CLOUDFLARE_ACCOUNT_ID=your-account-id
CLOUDFLARE_ZONE_ID=your-zone-id

# Workers (for background jobs, edge functions)
CLOUDFLARE_WORKER_URL=https://workers.elevateforhumanity.org

# R2 Storage (for user uploads, course materials)
R2_ACCOUNT_ID=your-account-id
R2_ACCESS_KEY_ID=your-access-key
R2_SECRET_ACCESS_KEY=your-secret-key
R2_BUCKET_NAME=elevate-uploads
R2_PUBLIC_URL=https://uploads.elevateforhumanity.org

# ----------------------------------------------------------------------------
# SENTRY ERROR TRACKING
# ----------------------------------------------------------------------------
# Get from: https://sentry.io/settings/[org]/projects/[project]/keys/
SENTRY_DSN=https://[key]@o[org].ingest.sentry.io/[project]
SENTRY_ORG=your-org
SENTRY_PROJECT=elevate-backend
SENTRY_AUTH_TOKEN=your-auth-token

# Frontend
VITE_SENTRY_DSN=https://[key]@o[org].ingest.sentry.io/[project]

# ----------------------------------------------------------------------------
# EMAIL (SMTP)
# ----------------------------------------------------------------------------
# Use SendGrid, Mailgun, AWS SES, or similar
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=apikey
SMTP_PASSWORD=SG.your-sendgrid-api-key
SMTP_FROM=noreply@elevateforhumanity.org
SMTP_FROM_NAME=Elevate for Humanity

# ----------------------------------------------------------------------------
# CORS CONFIGURATION
# ----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=https://elevateforhumanity.org,https://www.elevateforhumanity.org,http://localhost:5173,http://localhost:3000

# ----------------------------------------------------------------------------
# RATE LIMITING
# ----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000 # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_STRICT_MAX=5 # For auth endpoints

# ----------------------------------------------------------------------------
# AI SERVICES (Optional)
# ----------------------------------------------------------------------------
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...

# ----------------------------------------------------------------------------
# GOOGLE SERVICES (Optional)
# ----------------------------------------------------------------------------
# For OAuth, Analytics, Search
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret
GOOGLE_SEARCH_API_KEY=your-api-key
GOOGLE_SEARCH_ENGINE_ID=your-engine-id
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX

# ----------------------------------------------------------------------------
# SOCIAL AUTH (Optional)
# ----------------------------------------------------------------------------
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret

# ----------------------------------------------------------------------------
# MONITORING & ANALYTICS
# ----------------------------------------------------------------------------
# Application Performance Monitoring
NEW_RELIC_LICENSE_KEY=your-license-key
NEW_RELIC_APP_NAME=elevate-backend

# Log Management
LOGTAIL_SOURCE_TOKEN=your-logtail-token

# ----------------------------------------------------------------------------
# FEATURE FLAGS
# ----------------------------------------------------------------------------
ENABLE_REGISTRATION=true
ENABLE_SOCIAL_LOGIN=true
ENABLE_STRIPE_PAYMENTS=true
ENABLE_EMAIL_VERIFICATION=true
MAINTENANCE_MODE=false

# ----------------------------------------------------------------------------
# DEVELOPMENT ONLY
# ----------------------------------------------------------------------------
# These should NOT be set in production
DEBUG=false
LOG_LEVEL=info # debug, info, warn, error
PRETTY_LOGS=false

# ----------------------------------------------------------------------------
# RAILWAY SPECIFIC
# ----------------------------------------------------------------------------
# Railway automatically provides these, but you can override
# RAILWAY_ENVIRONMENT=production
# RAILWAY_PROJECT_ID=your-project-id
# RAILWAY_SERVICE_ID=your-service-id

# ----------------------------------------------------------------------------
# TERRAFORM (Infrastructure as Code)
# ----------------------------------------------------------------------------
# Only needed for infrastructure management
TF_VAR_cloudflare_api_token=$CLOUDFLARE_API_TOKEN
TF_VAR_railway_api_token=your-railway-token
TF_VAR_supabase_project_ref=[YOUR-PROJECT-REF]

# ============================================================================
# SECURITY CHECKLIST
# ============================================================================
# [ ] All secrets are randomly generated (not defaults)
# [ ] JWT_SECRET is at least 64 bytes
# [ ] ENCRYPTION_KEY is at least 32 bytes
# [ ] Stripe keys match environment (test vs live)
# [ ] CORS origins are restricted to your domains
# [ ] Rate limits are configured appropriately
# [ ] Sentry DSN is set for error tracking
# [ ] Database has RLS policies enabled
# [ ] .env is in .gitignore
# [ ] Secrets are stored in Railway/Cloudflare secrets manager
# ============================================================================
